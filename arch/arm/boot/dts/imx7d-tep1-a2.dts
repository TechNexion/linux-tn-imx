/*
 * Copyright 2016 Technexion Ltd.
 *
 * Author: Alvin Chen<alvin.chen@technexion.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 *
 */
/dts-v1/;

#include <dt-bindings/interrupt-controller/irq.h>
#include "imx7d.dtsi"
#include "imx7d-tep1.dtsi"
/ {
	model = "TechNexion TEP1-IMX7D board";
	compatible = "fsl,imx7d";

	regulators {
		reg_usb_otg2_vbus: regulator@1 {
			compatible = "regulator-fixed";
			reg = <1>;
			regulator-name = "usb_otg2_vbus";
			regulator-min-microvolt = <5000000>;
			regulator-max-microvolt = <5000000>;
			pinctrl-names = "default";
			pinctrl-0 = <&pinctrl_usbotg2_pwr>;
			gpio = <&gpio1 1 GPIO_ACTIVE_LOW>;
			enable-active-low;
		};
	};
};

&iomuxc {
	tep1-imx7d {
		pinctrl_pcie_a2: pcie_a2_ctrlgrp {
			fsl,pins = <
				MX7D_PAD_SAI2_RX_DATA__GPIO6_IO21	0x15	/* pcie POWER_ON_OFF */
			>;
		};
	};
};

&iomuxc_lpsr {
	tep1-imx7d-miscpins {
		pinctrl_usbotg2_pwr: usbotg2_pwr {
			fsl,pins = <
				MX7D_PAD_LPSR_GPIO1_IO01__GPIO1_IO1		0x14
			>;
		};
	};
};

&epdc {
	status = "disabled";
};

&pcie {
	pinctrl-names = "default";
	pinctrl-1 = <&pinctrl_pcie_a2>;
	power-on-gpio = <&gpio6 21 GPIO_ACTIVE_HIGH>;
	status = "okay";
};
